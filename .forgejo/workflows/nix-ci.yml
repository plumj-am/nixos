# This file was autogenerated by actions.nix. Do not edit it manually.
# To make changes, edit the workflow definition in your flake's actions-nix configuration
# (typically under flake.actions-nix.workflows.".forgejo/workflows/nix-ci.yml") and run:
#   nix run .#render-workflows
# Or commit to trigger the pre-commit hook if enabled.
concurrency:
  cancel-in-progress: false
  group: nix-ci-${{ forgejo.ref_name }}
jobs:
  build-blackwell:
    name: 'Build: blackwell'
    runs-on: blackwell
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Build: blackwell'
      run: nix build .#nixosConfigurations.blackwell.config.system.build.toplevel
        --accept-flake-config --builders "" --no-link
  build-date:
    name: 'Build: date'
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Build: date'
      run: nix build .#nixosConfigurations.date.config.system.build.toplevel --accept-flake-config
        --builders "" --no-link
  build-kiwi:
    name: 'Build: kiwi'
    runs-on: kiwi
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Build: kiwi'
      run: nix build .#nixosConfigurations.kiwi.config.system.build.toplevel --accept-flake-config
        --builders "" --no-link
  build-pear:
    name: 'Build: pear'
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Build: pear'
      run: nix build .#nixosConfigurations.pear.config.system.build.toplevel --accept-flake-config
        --builders "" --no-link
  build-plum:
    name: 'Build: plum'
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Build: plum'
      run: nix build .#nixosConfigurations.plum.config.system.build.toplevel --accept-flake-config
        --builders "" --no-link
  build-yuzu:
    name: 'Build: yuzu'
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Build: yuzu'
      run: nix build .#nixosConfigurations.yuzu.config.system.build.toplevel --accept-flake-config
        --builders "" --no-link
  check-deadnix:
    name: 'Check: deadnix'
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Check: deadnix'
      run: nix build .#checks.x86_64-linux.deadnix --accept-flake-config --builders
        "" --no-link
  check-nix-paths:
    name: 'Check: legacy imports'
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Check: legacy imports'
      run: nix build .#checks.x86_64-linux.nix-path --accept-flake-config --builders
        "" --no-link
  check-statix:
    name: 'Check: statix'
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: 'Check: statix'
      run: nix build .#checks.x86_64-linux.statix --accept-flake-config --builders
        "" --no-link
name: Nix CI
'on':
  pull_request:
    paths-ignore:
    - README.md
    - LICENSE.md
    - .forgejo/workflows/*
  push:
    branches:
    - dendritic
    paths-ignore:
    - README.md
    - LICENSE.md
    - .forgejo/workflows/*
  schedule:
  - cron: 5 0 * * *
