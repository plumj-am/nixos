# This file was autogenerated by actions.nix. Do not edit it manually.
# To make changes, edit the workflow definition in your flake's actions-nix configuration
# (typically under flake.actions-nix.workflows.".forgejo/workflows/update-flake-inputs.yml") and run:
#   nix run .#render-workflows
# Or commit to trigger the pre-commit hook if enabled.
concurrency:
  cancel-in-progress: false
  group: update-flake-inputs-${{ forgejo.ref_name }}
jobs:
  update-flake-inputs:
    name: Update Flake Inputs
    runs-on: plum
    steps:
    - name: Checkout
      uses: actions/checkout@v5
    - name: Update specific inputs
      run: nix flake update opencode claude-code
    - name: Commit and push changes
      run: |-
        fj auth add-key plumjam ${{ secrets.FORGEJO_TOKEN }}

        git config --global user.name "PlumJam [bot]"
        git config --global user.email "forgejo-bot@plumj.am"

        if [ -n "$(git status --porcelain flake.lock)" ]; then
          git add flake.lock
          git commit -m "nix: Update flake inputs for AI tools."
          git push origin master
          echo "Changes committed and pushed."
        else
          echo "No changes to push."
        fi
name: Update Flake Inputs
'on':
  workflow_dispatch: {}
